<ion-view view-title="Inicial">
  <ion-content class="padding">
    <h5 class="positive">Usuário: {{loggedUser}}</h5>

    <button class="button button-block button-energized" ng-show="hasCurrentEvent">
      Última ação: {{currentEventName}}, iniciada em {{currentEvent.initialDate}}
    </button>

    <div class="item item-divider" ng-hide="addConfirm">
      Ações
    </div>
    <div class="list" ng-hide="addConfirm">
      <a class="item item-icon-left" href="" ng-repeat="service in services" 
        ng-click="confirm(service)"
        ng-if="service.id==currentEvent.serviceId || !hasCurrentEvent">
        <i class="icon {{service.icon}}"></i>
        {{service.name}}
      </a>
    </div>

    <div class="item item-divider" ng-show="addConfirm">
      Operação: {{service.name}}
    </div>
    <div class="list" ng-show="addConfirm">
      <a class="item" href="">
        <strong>Hora:</strong> {{date}}
      </a>
      <a class="item" href="" ng-if="true">
        <strong>GPS:</strong> {{gps}}
      </a>
    </div>

    <div class="list" ng-show="addConfirm && hasCurrentEvent && hasToJustify">
      <label class="item item-input item-select">
        <div class="input-label">
          Justificativa
        </div>
        <select ng-model="eventMsgId">
          <option ng-repeat="serviceMsg in servicesMsg" value="{{serviceMsg.id}}">
            {{serviceMsg.name}}
          </option>
        </select>
      </label>
    </div>

    <button class="button button-block button-positive" 
      ng-click="add()" ng-show="addConfirm && !hasCurrentEvent">
      Confirmar Início
    </button>
    <button class="button button-block button-positive" ng-disabled="!eventMsgId && hasToJustify"
      ng-click="add(eventMsgId)" ng-show="addConfirm && hasCurrentEvent">
      Confirmar Término
    </button>

  </ion-content>
</ion-view>